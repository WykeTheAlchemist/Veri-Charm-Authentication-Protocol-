<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeriCharm | Authenticity, Verified.</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="logo-text">
                    <h1>VeriCharm</h1>
                    <p>Authenticity, Verified. Sustainability, Ensured.</p>
                </div>
            </div>
            <div class="wallet-display">
                <div class="wallet-balance">
                    <div class="balance-amount" id="balance-display">200 DLLR</div>
                    <div class="balance-label">Testnet Balance</div>
                </div>
                <div class="wallet-address" style="font-size: 12px; color: var(--gray); margin-top: 5px;">
                    <i class="fas fa-wallet"></i> Address: <span id="wallet-address">bc1q...demo</span>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="products">Products</div>
            <div class="nav-tab" data-tab="directory">Trusted Directory</div>
            <div class="nav-tab" data-tab="explorer">Block Explorer</div>
            <div class="nav-tab" data-tab="tokens">My Tokens</div>
        </div>

        <!-- Products Tab -->
        <div id="products-tab" class="tab-content active">
            <h2 class="section-title">Authentic Products Awaiting Verification</h2>
            
            <div class="products-grid">
                <!-- Luxury Fragrance -->
                <div class="product-card">
                    <div class="product-image" style="background: linear-gradient(135deg, #4A5568, #2D3748);">
                        <div class="product-badge">
                            <i class="fas fa-gem"></i> Luxury
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Luxury Fragrance</div>
                        <div class="product-name">√âclat de Lune</div>
                        <div class="product-retailer">
                            <i class="fas fa-store"></i> Scent & Soul Boutique
                        </div>
                        <div class="product-price">50.00</div>
                        <button class="btn btn-primary" id="buy-fragrance" onclick="openPurchaseModal('fragrance')">
                            <i class="fas fa-shopping-cart"></i> Purchase with Verification
                        </button>
                    </div>
                </div>

                <!-- Sensitive Medication -->
                <div class="product-card">
                    <div class="product-image" style="background: linear-gradient(135deg, #E2E8F0, #CBD5E0);">
                        <div class="product-badge">
                            <i class="fas fa-prescription-bottle"></i> Pharmaceutical
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Sensitive Medication</div>
                        <div class="product-name">Amoxiclav-Duo</div>
                        <div class="product-retailer">
                            <i class="fas fa-clinic-medical"></i> TrustCare Pharmacy
                        </div>
                        <div class="product-price">10.00</div>
                        <button class="btn btn-primary" id="buy-medication" onclick="openPurchaseModal('medication')">
                            <i class="fas fa-shopping-cart"></i> Purchase with Verification
                        </button>
                    </div>
                </div>

                <!-- Organic Agricultural Product -->
                <div class="product-card">
                    <div class="product-image" style="background: linear-gradient(135deg, #9AE6B4, #68D391);">
                        <div class="product-badge">
                            <i class="fas fa-seedling"></i> Organic
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Organic Produce</div>
                        <div class="product-name">Royal Purple Eggplants</div>
                        <div class="product-retailer">
                            <i class="fas fa-tractor"></i> Farmers' Fresh Market
                        </div>
                        <div class="product-price">5.00</div>
                        <button class="btn btn-primary" id="buy-produce" onclick="openPurchaseModal('produce')">
                            <i class="fas fa-shopping-cart"></i> Purchase with Verification
                        </button>
                    </div>
                </div>

                <!-- Renewable Energy Component -->
                <div class="product-card">
                    <div class="product-image" style="background: linear-gradient(135deg, #4A9C8A, #5BBF9A);">
                        <div class="product-badge energy-badge">
                            <i class="fas fa-solar-panel"></i> Eco-Friendly
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Renewable Energy Component</div>
                        <div class="product-name">EcoGrid Power Inverter</div>
                        <div class="product-retailer">
                            <i class="fas fa-industry"></i> GreenTech Solutions
                        </div>
                        <div class="product-price">150.00</div>
                        <button class="btn btn-primary" id="buy-energy" onclick="openPurchaseModal('energy')">
                            <i class="fas fa-shopping-cart"></i> Purchase with Verification
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Directory Tab -->
        <div id="directory-tab" class="tab-content">
            <div class="directory-container">
                <div class="directory-section">
                    <h2><i class="fas fa-industry"></i> Trusted Suppliers</h2>
                    <div class="address-list">
                        <div class="address-item">
                            <div class="address-info">
                                <h4>L'√âclat des Cieux</h4>
                                <p>Luxury Fragrance Manufacturer</p>
                            </div>
                            <div class="address-value">addr1...RvT5</div>
                        </div>
                        <div class="address-item">
                            <div class="address-info">
                                <h4>VitaSure Pharmaceuticals</h4>
                                <p>Pharmaceutical Manufacturer</p>
                            </div>
                            <div class="address-value">addr1...Ph8K</div>
                        </div>
                        <div class="address-item">
                            <div class="address-info">
                                <h4>GreenRoots Organic Farm</h4>
                                <p>Organic Produce Supplier</p>
                            </div>
                            <div class="address-value">addr1...Gr3F</div>
                        </div>
                        <div class="address-item">
                            <div class="address-info">
                                <h4>EcoVolt Technologies</h4>
                                <p>Renewable Energy Component Manufacturer</p>
                                <small class="eco-note">‚ôªÔ∏è Carbon Neutral Certified</small>
                            </div>
                            <div class="address-value">addr1...Ec0V</div>
                        </div>
                    </div>
                </div>

                <div class="directory-section">
                    <h2><i class="fas fa-store"></i> Authorized Retailers</h2>
                    <div class="address-list">
                        <div class="address-item">
                            <div class="address-info">
                                <h4>Scent & Soul Boutique</h4>
                                <p>Luxury Fragrance Retailer</p>
                            </div>
                            <div class="address-value">0xU...rah5r</div>
                        </div>
                        <div class="address-item">
                            <div class="address-info">
                                <h4>TrustCare Pharmacy</h4>
                                <p>Pharmaceutical Retailer</p>
                            </div>
                            <div class="address-value">0xU...ph4rm</div>
                        </div>
                        <div class="address-item">
                            <div class="address-info">
                                <h4>Farmers' Fresh Market</h4>
                                <p>Produce Retailer</p>
                            </div>
                            <div class="address-value">0xU...m4rkT</div>
                        </div>
                        <div class="address-item">
                            <div class="address-info">
                                <h4>GreenTech Solutions</h4>
                                <p>Renewable Energy Retailer</p>
                                <small class="eco-note">üå± Eco-Friendly Certified</small>
                            </div>
                            <div class="address-value">0xU...Gr3nT</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Explorer Tab -->
        <div id="explorer-tab" class="tab-content">
            <div class="explorer-container">
                <div class="explorer-header">
                    <h2 class="explorer-title">BitcoinOS Transaction Explorer</h2>
                    <div class="privacy-toggle">
                        <span class="toggle-label">ZK-Proof Privacy</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="privacy-toggle" onchange="togglePrivacy()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="transaction-history" id="transaction-history">
                    <!-- Transactions will be dynamically added here -->
                </div>
            </div>
        </div>

        <!-- My Tokens Tab -->
        <div id="tokens-tab" class="tab-content">
            <div class="token-management">
                <h2 class="section-title">My Charm Tokens</h2>

                <div id="no-tokens-message" class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <div>
                        <strong>No tokens yet.</strong> Purchase a product to receive your first Charm token.
                    </div>
                </div>

                <div id="token-list" class="token-list">
                    <!-- Tokens will be dynamically added here -->
                </div>

                <div id="token-actions" class="action-buttons" style="display: none;">
                    <button class="btn btn-secondary" onclick="showRefundInfo()">
                        <i class="fas fa-undo"></i> Initiate Return
                    </button>
                    <button class="btn btn-primary" onclick="showRaffleInfo()">
                        <i class="fas fa-gift"></i> Enter Raffle Draw
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div id="purchase-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modal-title">Purchase Product</h2>
            </div>
            <div class="modal-content">
                <div id="address-alert" class="alert" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div id="alert-message"></div>
                </div>

                <div class="form-group">
                    <label for="retailer-address">Retailer Payment Address</label>
                    <input type="text" id="retailer-address" class="form-control" placeholder="Paste retailer address here">
                    <small class="form-hint">
                        This should be provided by the retailer at checkout.
                    </small>
                </div>

                <div class="form-group">
                    <label for="payment-amount">Payment Amount (DLLR)</label>
                    <input type="text" id="payment-amount" class="form-control form-readonly" readonly>
                </div>

                <div class="form-group">
                    <label for="current-balance">Your Current Balance</label>
                    <input type="text" id="current-balance" class="form-control form-readonly" value="200 DLLR" readonly>
                </div>

                <div id="verification-process" style="display: none;">
                    <div class="alert alert-energy">
                        <i class="fas fa-sync fa-spin"></i>
                        <div>
                            <strong>Verifying address...</strong> Checking against trusted directory.
                        </div>
                    </div>
                </div>

                <div id="seller-prompt" style="display: none;">
                    <div class="alert alert-warning">
                        <i class="fas fa-store"></i>
                        <div>
                            <strong>Waiting for retailer confirmation...</strong> The retailer must approve the token transfer.
                        </div>
                    </div>
                </div>

                <div id="buyer-prompt" style="display: none;">
                    <div class="alert alert-success">
                        <i class="fas fa-box-open"></i>
                        <div>
                            <strong>Confirm receipt</strong> Please confirm you have received the physical product.
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button id="send-payment-btn" class="btn btn-primary" onclick="sendPayment()">Send Payment</button>
                <button id="confirm-receipt-btn" class="btn btn-primary" style="display: none;" onclick="confirmReceipt()">Confirm Receipt</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2>Purchase Complete!</h2>
            </div>
            <div class="modal-content">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="success-title">Charm Token Received!</h3>
                    <p class="success-message">
                        Your product has been verified as authentic. The Charm token is now in your wallet.
                    </p>
                    <div class="alert alert-success">
                        <i class="fas fa-shield-check"></i>
                        <div>
                            <strong>Product Authenticity Verified</strong><br>
                            Full provenance trail recorded on BitcoinOS.
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeSuccessModal()">View Token</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>